<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8" />
<link rel="stylesheet" href="main.css" type="text/css" />
<link rel="stylesheet" href="blog.css" type="text/css" />
<link rel="alternate" type="application/rss+xml" title="Subscribe to this page..." href="feed.rss" />
<title>Newkys Brain Farts.</title>
</head><body>
<div id="divbodyholder">
<div class="headerholder"><div class="header">
<div id="title">
<h1 class="nomargin"><a class="ablack" href="http://richydelaney.com/snippets">Newkys Brain Farts.</a></h1>
<div id="description">Snippets of all things tech and otherwise.</div>
</div></div></div>
<div id="divbody"><div class="content">
<!-- entry begin -->
<h3><a class="ablack" href="http://richydelaney.com/snippets/git-commit-messages-in-vim.html">
Git commit messages in vim
</a></h3>
<div class="subtitle">March 19, 2013 &mdash; 
Richy Delaney</div>
<!-- text begin -->

<p>If you write your git commit messages in vim, there is a good chance that when you go to write it, your vim cursor is not on the first line. I often questioned why this is. After a quick google this morning, I discovered that its due to vim remembering position of the previous git commit. Stick this in your .vimrc for fix.</p>
<pre>
autocmd FileType gitcommit call setpos('.', [0, 1, 1, 0])
</pre>
<!-- text end -->
<p id='twitter'>Comments? &nbsp;
<a href="https://twitter.com/share" class="twitter-share-button" data-text="&lt;Type your comment here but please leave the URL so that other people can follow the comments&gt;" data-url="http://richydelaney.com/snippets/git-commit-messages-in-vim.html"
 data-via="RichyDelaney"
>Tweet</a>	<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
</p>
<!-- entry end -->
<!-- entry begin -->
<h3><a class="ablack" href="http://richydelaney.com/snippets/note-taking-application-for-bash.html">
Note taking application for bash.
</a></h3>
<div class="subtitle">March 15, 2013 &mdash; 
Richy Delaney</div>
<!-- text begin -->

I use a very simple means for taking notes while at my desktop. Often during the name I will need a place to write something quick. I love to write in vim, its where I am at my quickest. I have tried multiple different ways to do this but this is my favourite so far. Its not perfect, but its simple which means that it is very easy to extend this system to work with things like dropbox syncing or something like that.<br><br>
Put this snippet in your bashrc:
<pre>
function note()
{
if [ ! -d $HOME/Notes/ ]; then
mkdir $HOME/Notes/
fi;

vim -p $HOME/Notes/$1.note
}
</pre>
Please note this will create files in a directory named "Notes" in your home directory. The nice thing is that the syntax for using this is incredibly simple. Just write the following to write a note:
<pre>
$ note somethingimportantIneedtoremember
</pre>
You can edit a note very quickly simply by retyping the name.I have found this incredibly useful.
<!-- text end -->
<p id='twitter'>Comments? &nbsp;
<a href="https://twitter.com/share" class="twitter-share-button" data-text="&lt;Type your comment here but please leave the URL so that other people can follow the comments&gt;" data-url="http://richydelaney.com/snippets/note-taking-application-for-bash.html"
 data-via="RichyDelaney"
>Tweet</a>	<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
</p>
<!-- entry end -->
<!-- entry begin -->
<h3><a class="ablack" href="http://richydelaney.com/snippets/a-useful-bash-function-for-coding-with-git.html">
A useful bash function for coding with git.
</a></h3>
<div class="subtitle">March 14, 2013 &mdash; 
Richy Delaney</div>
<!-- text begin -->

Ever commit some code for review, and get some comments. Want to quickly open vim up with the files from the last commit. I have created a function in my .bashrc to accomadate this. To do this, I use git diff with --name-only:
<pre>
function vmod {
vim -p `git diff --name-only $1`
}
</pre>
Now on a bash shell, you can do the following to grab all the edited files from the last commit:
<pre>
$ vmod HEAD~1
</pre>
This will open (in tabs) all the previously edited files.
<!-- text end -->
<p id='twitter'>Comments? &nbsp;
<a href="https://twitter.com/share" class="twitter-share-button" data-text="&lt;Type your comment here but please leave the URL so that other people can follow the comments&gt;" data-url="http://richydelaney.com/snippets/a-useful-bash-function-for-coding-with-git.html"
 data-via="RichyDelaney"
>Tweet</a>	<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
</p>
<!-- entry end -->
<!-- entry begin -->
<h3><a class="ablack" href="http://richydelaney.com/snippets/using-grep-named-pipes-and-some-vim-trickery-for-refactoring.html">
Using grep, named pipes and some vim trickery for refactoring.
</a></h3>
<div class="subtitle">March 13, 2013 &mdash; 
Richy Delaney</div>
<!-- text begin -->

Thought I would pen a post about how I use a mixture of the above tools to do some naming refactoring in vim.
First, I use grep with a load of flags (to specify things like only python files, case insensitivity). I also include the flag to only print the filenames, I then pipe these into a named pipe as follows:
<pre>
grep -il "some_function_name" > /tmp/named_pipe
</pre>
I then open all these files in separate tabs in vim using the following (be careful where you are when u run vim, as the directory structure is important.
<pre>
vim -p `cat /tmp/named_pipe`
</pre>
At this point, you can do a mass refactor of that search term as follows. Lets say I want to change "some_function_name" to "function_name". In vim, I do the following:
<pre>
:bufdo %s/some_function_name/function_name/gc | update
</pre>
<!-- text end -->
<p id='twitter'>Comments? &nbsp;
<a href="https://twitter.com/share" class="twitter-share-button" data-text="&lt;Type your comment here but please leave the URL so that other people can follow the comments&gt;" data-url="http://richydelaney.com/snippets/using-grep-named-pipes-and-some-vim-trickery-for-refactoring.html"
 data-via="RichyDelaney"
>Tweet</a>	<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
</p>
<!-- entry end -->
<!-- entry begin -->
<h3><a class="ablack" href="http://richydelaney.com/snippets/python-decorator-to-automagically-return-to-same-directory.html">
Python decorator to automagically return to same directory.
</a></h3>
<div class="subtitle">March 13, 2013 &mdash; 
Richy Delaney</div>
<!-- text begin -->

<p>This is just a simple little hack which I wrote to allow me to do a load of changing directory in a function but when that function exits, to return to the directory I was in when I entered. This makes it a lot easier to reason about where the current flow of the project is.</p>
<script src="https://gist.github.com/Newky/5151640.js"></script>
<!-- text end -->
<p id='twitter'>Comments? &nbsp;
<a href="https://twitter.com/share" class="twitter-share-button" data-text="&lt;Type your comment here but please leave the URL so that other people can follow the comments&gt;" data-url="http://richydelaney.com/snippets/python-decorator-to-automagically-return-to-same-directory.html"
 data-via="RichyDelaney"
>Tweet</a>	<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
</p>
<!-- entry end -->
<!-- entry begin -->
<h3><a class="ablack" href="http://richydelaney.com/snippets/publishing-a-git-repo-using-remotes-on-a-remote-server.html">
Publishing a git repo using remotes on a remote server
</a></h3>
<div class="subtitle">March 12, 2013 &mdash; 
Richy Delaney</div>
<!-- text begin -->

Steps are as follows on remote server:
<ul>
<li>mkdir reponame.git</li>
<li>cd reponame.git</li>
<li>git init --bare</li>
</ul>
<br/>
If you have the remote server set up as an ssh machine in .ssh/config, the process becomes a breeze. Presuming the host is called "remoteserver". You would do the following to add it as a remote in your local git repository.
<pre>
git remote add web remoteserver:reponame.git
</pre>
This also presumes that reponame.git was created in the users home directory that you login as. To push changes, add them to your commits. and just push to the remote using (presuming that the changes you have are on master):
<pre>
git push web master
</pre>
<br/>
Additional trick is to set up a place for this to be pushed to (i.e a bare repo just holds the git data but its inaccessible in the usual way to do that, you can define a hook in "hooks/post-receive". Here is an example script which installs the changes into ~/reponame directory.
<pre>
#!/bin/sh
GIT_WORK_TREE=$HOME/reponame
export GIT_WORK_TREE
git checkout -f
</pre>
<!-- text end -->
<p id='twitter'>Comments? &nbsp;
<a href="https://twitter.com/share" class="twitter-share-button" data-text="&lt;Type your comment here but please leave the URL so that other people can follow the comments&gt;" data-url="http://richydelaney.com/snippets/publishing-a-git-repo-using-remotes-on-a-remote-server.html"
 data-via="RichyDelaney"
>Tweet</a>	<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
</p>
<!-- entry end -->
<!-- entry begin -->
<h3><a class="ablack" href="http://richydelaney.com/snippets/trying-out-the-bash-blog.html">
Trying out the bash blog
</a></h3>
<div class="subtitle">March 12, 2013  &mdash; 
Richy Delaney</div>
<!-- text begin -->

Recently, I found from Hacker news, this great post about a <a href='http://mmb.pcb.ub.es/~carlesfe/blog/creating-a-simple-blog-system-with-a-500-line-bash-script.html'>500 line bash blogging system.</a>

So as a test for a few days, I am going to see how productive I can be with this new arrangement. It allows me to quickly compose small posts in a <i>relatively</i> simple and easy way using vim, my favourite editor.

I imagine that my posts will be short. Just with snippets of relevantly useful information.

Lets see how it goes.
<!-- text end -->
<p id='twitter'>Comments? &nbsp;
<a href="https://twitter.com/share" class="twitter-share-button" data-text="&lt;Type your comment here but please leave the URL so that other people can follow the comments&gt;" data-url="http://richydelaney.com/snippets/trying-out-the-bash-blog.html"
 data-via="RichyDelaney"
>Tweet</a>	<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
</p>
<!-- entry end -->
<div id="all_posts"><a href="all_posts.html">View more posts</a> &mdash; <a href="feed.rss">Subscribe</a></div>
</div>
<div id="footer">CC by-nc-nd <a href="http://twitter.com/RichyDelaney">Richy Delaney</a> &mdash; <a href="mailto:richdel1991&#64;gmail&#46;com">richdel1991&#64;gmail&#46;com</a></div>
</div></div>
</body></html>
